window.onload=function(){function t(t,n){$(".fin-price").text(t*n)}var n,i=[],s=[],o=JSON.parse(window.localStorage.getItem("goods"))||null;o&&o.forEach(function(n){var o="<li>";o+='<div class="list-left"><div><span class="glyphicon glyphicon-ok-sign" alt="commit"></span></div>',o+='<img src="'+n.url+'"></div>',o+='<div class="list-right"><div>'+n.title+"</div>",o+='<div><span class="pricepart">ï¿¥'+n.price+'</span><span class="numpart"><span class="glyphicon glyphicon-minus"></span><span>'+n.num+'</span><span class="glyphicon glyphicon-plus"></span><span class="glyphicon glyphicon-trash"></span></span></div>',o+="</div></li>",$(""+o).appendTo($(".connect ul")),i.push(n.price),s.push(n.num),t(n.price,n.num)}),$(".numpart span:nth-child(1)").each(function(s,o){$(this).on("touchstart",function(o){"glyphicon glyphicon-ok-sign"==$("[alt=commit]").eq(s).prop("class")&&(n=$(this).next().text(),n=n>0?--n:0,$(this).next().text(n),t(i[s],n),o.preventDefault())})}),$(".numpart span:nth-child(3)").each(function(s,o){$(this).on("touchstart",function(o){"glyphicon glyphicon-ok-sign"==$("[alt=commit]").eq(s).prop("class")&&(n=$(this).prev().text(),++n,$(this).prev().text(n),t(i[s],n),o.preventDefault())})}),$(".numpart span:nth-child(4)").on("touchstart",function(t){$(this).parents("li").remove(),window.localStorage.removeItem("goods")}),$("#list").on("touchstart",function(t){"hide"==$("#list").attr("alt")?($(".list-connect").show(),$("#list").attr("alt","show")):"show"==$("#list").attr("alt")&&($(".list-connect").hide(),$("#list").attr("alt","hide")),t.preventDefault()}),$("[alt=commit]").each(function(n,s){$(this).on("touchstart",function(){if("glyphicon glyphicon-ok-sign"==$(this).prop("class"))$(this).removeClass("glyphicon glyphicon-ok-sign"),t(0,0);else if(""==$(this).prop("class")){$(this).addClass("glyphicon glyphicon-ok-sign");var s=$(".numpart span:nth-child(2)").text(),o=i[n];t(o,s)}})}),$("#all").on("touchstart",function(){$("[alt=commit]").each(function(n){if("glyphicon glyphicon-ok-sign"==$("[alt=commit]").prop("class"))$("[alt=commit]").removeClass("glyphicon glyphicon-ok-sign"),t(0,0);else if(""==$("[alt=commit]").prop("class")){$("[alt=commit]").addClass("glyphicon glyphicon-ok-sign");var s=$(".numpart span:nth-child(2)").text(),o=i[n];t(o,s)}})})};