window.onload=function(){function n(){}function a(){}function t(n){var a=new RegExp("(^|&)"+n+"=([^&]*)(&|$)"),t=window.location.search.substr(1).match(a);return null!=t?unescape(t[2]):null}function s(){new Swiper(".swiper-container",{pagination:".swiper-pagination",paginationClickable:!0,autoplay:2500,spaceBetween:0,pagination:".swiper-pagination"})}var i,o,e=t("id"),p=window.localStorage.getItem("goods");if(p){obj=JSON.parse(p);var l=0;obj.forEach(function(n){l+=n.num,$(".goods-num").text(l)})}$.ajax({url:JUZUIUrl,type:"get",success:function(n){i=JSON.parse(n),c.init(i)}}),$.ajax({url:commentUrl,type:"get",success:function(n){o=JSON.parse(n),u.init(o)}});var r="";n.prototype={constuructor:n,init:function(n){n.forEach(function(n){n.id==e&&(n.img.forEach(function(n){$('<div class="swiper-slide"><a href=""><img src="'+n+'"></a></div>').appendTo($(".swiper-wrapper")),$('<div class="swiper-pagination"></div>').appendTo($(".swiper-container"))}),$("<p>"+n.title+"</p>").appendTo($(".part-top")),$("<p><span>"+n.money+"</span></p>").appendTo($(".part-top")),$("<ul><li><span>品牌名称:</span><span>"+n.brandname+"</span></li><li><span>商品名称:</span><span>"+n.goodsname+"</span></li><li><span>产地:</span><span>"+n.place+"</span></li><li><span>材质:</span><span>"+n.stuff+"</span></li><li><span>洗涤说明:</span><span>"+n.wash+"</span></li></ul>").appendTo($(".part-middle")),$('<img src="'+n.infro+'">').appendTo($(".part-bottom")),s(),r='{"id":"'+n.id+'","price":"'+n.money+'","url":"'+n.cover+'","title":"'+n.title+'","num":"1"}')})},storage:function(){var n=c.select(),a=window.localStorage.getItem("goods");if(a=JSON.parse(a),0==n){null==a?(r="["+r+"]",window.localStorage.setItem("goods",r),c.update()):(r=JSON.parse(r),a.push(r),a=JSON.stringify(a),window.localStorage.setItem("goods",a),c.update())}else c.add(n)},add:function(n){var a=window.localStorage.getItem("goods"),t=JSON.parse(a),s=[];$.each(t,function(n,a){a.id==e&&(a.num=parseInt(a.num)+1),s.push(a)}),t=JSON.stringify(s),window.localStorage.setItem("goods",t),c.update()},update:function(){var n=window.localStorage.getItem("goods");n=JSON.parse(n);var a=0;$.each(n,function(n,t){a+=t.num}),$(".goods-num").text(a)},select:function(){var n=window.localStorage.getItem("goods");if(null==n)return!1;n=JSON.parse(n);var a=!1;return $.each(n,function(n,t){t.id==e&&(a=t)}),a}};var c=new n;a.prototype={constructor:a,init:function(n){n.forEach(function(n){var a="<ul>";a+='<li><span class="head"><img src="'+n.imghead+'"></span><span>'+n.name+"</span><span>"+n.commentTime+"</span></li>",a+='<li><span class="glyphicon glyphicon-star"></span><span class="glyphicon glyphicon-star"></span><span class="glyphicon glyphicon-star"></span><span class="glyphicon glyphicon-star"></span><span class="glyphicon glyphicon-star"></span></li>',a+="<li><span>"+n.comment+"</span></li>",a+="<li><span>购买日期：</span><span>"+n.buyDate+"</span></li>",a+="</ul>",$(""+a).appendTo($(".comment"))})}};var u=new a;$("#titlebtn a").each(function(n){$(this).on("touchstart",function(){$(this).addClass("active").siblings().removeClass("active"),$(".part").eq(n).show().siblings(".part").hide()})}),$("#list").on("touchstart",function(n){"hide"==$("#list").attr("alt")?($(".list-connect").show(),$("#list").attr("alt","show")):"show"==$("#list").attr("alt")&&($(".list-connect").hide(),$("#list").attr("alt","hide")),n.preventDefault()}),$("#add").on("touchstart",function(){c.storage()})};